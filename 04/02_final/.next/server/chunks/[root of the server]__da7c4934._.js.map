{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/narendrakumar/Documents/Session_04_Final/app/api/watchlist/route.js"],"sourcesContent":["// app/api/watchlist/route.js\nimport { NextResponse } from 'next/server';\nimport fs from 'fs/promises'; // Use promises version of file system module\nimport path from 'path';\n\n// Define the path to the data directory\nconst dataDir = path.join(process.cwd(), 'data', 'watchlistPortfolio');\n\n// --- GET Request Handler ---\nexport async function GET(request) {\n  // !!! TEMPORARY: Hardcoding username for teaching purposes !!!\n  // !!! In a real app, get this from user session/token !!!\n  const username = 'Ram';\n  const filePath = path.join(dataDir, `${username}.json`);\n\n  try {\n    // Try to read the user's data file\n    const jsonData = await fs.readFile(filePath, 'utf-8');\n    const data = JSON.parse(jsonData);\n\n    // Return the watchlist array, or an empty array if it doesn't exist\n    return NextResponse.json({ watchlist: data.watchlist || [] });\n\n  } catch (error) {\n    // Check if the error is because the file doesn't exist\n    if (error.code === 'ENOENT') {\n      // File not found for the user, return an empty watchlist\n      return NextResponse.json({ watchlist: [] });\n    } else {\n      // Other error (e.g., reading file failed, JSON parse error)\n      console.error(\"API Watchlist GET Error:\", error); // Log server-side error\n      return NextResponse.json(\n        { message: 'Failed to read watchlist data.' },\n        { status: 500 } // Internal Server Error status\n      );\n    }\n  }\n}\n\n// TODO: Add POST handler later for adding stocks"],"names":[],"mappings":"AAAA,6BAA6B;;;;AAC7B;AACA,8MAA8B,6CAA6C;AAC3E;;;;AAEA,wCAAwC;AACxC,MAAM,UAAU,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAG1C,eAAe,IAAI,OAAO;IAC/B,+DAA+D;IAC/D,0DAA0D;IAC1D,MAAM,WAAW;IACjB,MAAM,WAAW,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,KAAK,CAAC;IAEtD,IAAI;QACF,mCAAmC;QACnC,MAAM,WAAW,MAAM,qHAAA,CAAA,UAAE,CAAC,QAAQ,CAAC,UAAU;QAC7C,MAAM,OAAO,KAAK,KAAK,CAAC;QAExB,oEAAoE;QACpE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,WAAW,KAAK,SAAS,IAAI,EAAE;QAAC;IAE7D,EAAE,OAAO,OAAO;QACd,uDAAuD;QACvD,IAAI,MAAM,IAAI,KAAK,UAAU;YAC3B,yDAAyD;YACzD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,WAAW,EAAE;YAAC;QAC3C,OAAO;YACL,4DAA4D;YAC5D,QAAQ,KAAK,CAAC,4BAA4B,QAAQ,wBAAwB;YAC1E,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAiC,GAC5C;gBAAE,QAAQ;YAAI,EAAE,+BAA+B;;QAEnD;IACF;AACF,EAEA,iDAAiD","debugId":null}}]
}